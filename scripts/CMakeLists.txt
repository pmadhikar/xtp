if(WITH_DIPRO)
  foreach(SCRIPT ctp_dipro)
    configure_file(${SCRIPT}.in ${CMAKE_CURRENT_BINARY_DIR}/${SCRIPT}.out @ONLY)
    add_custom_command(OUTPUT ${SCRIPT} DEPENDS ${SCRIPT})
    add_custom_target(${SCRIPT} ALL COMMAND ${CMAKE_COMMAND}
      -DINPUT="${SCRIPT}.out" -DOUTPUT="${SCRIPT}"
      -DGIT_EXECUTABLE="${GIT_EXECUTABLE}"
      -DMERCURIAL_EXECUTABLE="${MERCURIAL_EXECUTABLE}"
      -DTOP_SOURCE_DIR="${CMAKE_SOURCE_DIR}" -P ${CMAKE_MODULE_PATH}/hgscript.cmake
      DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/${SCRIPT}.out)
    set_property(DIRECTORY APPEND PROPERTY ADDITIONAL_MAKE_CLEAN_FILES ${SCRIPT})
    install(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/${SCRIPT} DESTINATION bin)
  endforeach(SCRIPT)
endif(WITH_DIPRO)

foreach(SCRIPT ctp_testsuite ctp_update ctp_update_exciton ctp_basisset)
  configure_file(${SCRIPT}.in ${CMAKE_CURRENT_BINARY_DIR}/${SCRIPT}.out @ONLY)
  add_custom_command(OUTPUT ${SCRIPT} DEPENDS ${SCRIPT})
  add_custom_target(${SCRIPT} ALL COMMAND ${CMAKE_COMMAND}
    -DINPUT="${SCRIPT}.out" -DOUTPUT="${SCRIPT}"
    -DGIT_EXECUTABLE="${GIT_EXECUTABLE}"
    -DMERCURIAL_EXECUTABLE="${MERCURIAL_EXECUTABLE}"
    -DTOP_SOURCE_DIR="${CMAKE_SOURCE_DIR}" -P ${CMAKE_MODULE_PATH}/hgscript.cmake
    DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/${SCRIPT}.out)
  set_property(DIRECTORY APPEND PROPERTY ADDITIONAL_MAKE_CLEAN_FILES ${SCRIPT})
  install(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/${SCRIPT} DESTINATION bin)
endforeach(SCRIPT)

